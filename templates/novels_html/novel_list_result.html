<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>查询结果</title>
    <script>
        function novels_chapter_list(id) {
            novel_id = document.getElementById(id).value;
            console.log(novel_id);
            var a = document.createElement('a');
            a.setAttribute('href', '/NovelChapterSpider?novel_id=' + novel_id);
            a.setAttribute('target','_blank');
            document.body.append(a);
            a.click();

            {#原来是AJAX，好像不能实现，保留代码，日后改良#}
            {#console.log(novel_id);#}
            {#xhttp = new XMLHttpRequest();#}
            {#xhttp.open('GET', '/NovelChapterSpider?novel_id=' + novel_id, false);#}
            {#xhttp.send()#}
            {#alert('可以跳转了')#}
        }
    </script>
</head>
<body>
{% for i in novels_name %}
    <div>
        <h3><strong><a onclick="novels_chapter_list({{ loop.index }})">{{ i }}</a></strong></h3>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----<strong>{{ novels_writer[loop.index0] }}</strong></p>
        <p>&nbsp;&nbsp;{{ novels_sub[loop.index0] }}</p><br>
        <input hidden id="{{ loop.index }}" value={{ novels_id[loop.index0] }}></input>
    </div>

{% endfor %}
<div hidden id="chapters">{{ chapter }}
</div>

</body>
</html>